{{define "content"}}

{{template "admin-nav" .}}
{{template "admin-toast" .}}

<!-- Page Header -->
<section class="bg-timber">
    <div class="max-w-[1100px] mx-auto px-4 py-8 md:py-10">
        <h1 class="font-display font-[800] text-[clamp(24px,3.5vw,36px)] leading-[1.05] text-cream">Dashboard</h1>
        <p class="font-body text-cream/70 text-sm mt-1">Welcome back. Here's what's happening.</p>
    </div>
</section>

<div class="max-w-[1100px] mx-auto px-4 py-8 md:py-12">

    <!-- Stat Cards -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-10">
        <!-- New Inquiries -->
        <div class="bg-white rounded-[4px] border {{if gt .NewCount 0}}border-copper{{else}}border-sand-dk{{end}} p-5">
            <p class="font-ui text-[11px] uppercase tracking-[0.35em] text-ink-faded mb-1">New Inquiries</p>
            <p class="font-display font-bold text-[clamp(28px,4vw,36px)] {{if gt .NewCount 0}}text-copper{{else}}text-ink{{end}}">{{.NewCount}}</p>
            {{if gt .NewCount 0}}
            <p class="font-body text-copper text-xs mt-1">Needs attention</p>
            {{end}}
        </div>

        <!-- Total Inquiries -->
        <div class="bg-white rounded-[4px] border border-sand-dk p-5">
            <p class="font-ui text-[11px] uppercase tracking-[0.35em] text-ink-faded mb-1">Total Inquiries</p>
            <p class="font-display font-bold text-[clamp(28px,4vw,36px)] text-ink">{{.TotalCount}}</p>
        </div>

        <!-- Deposits Collected -->
        <div class="bg-white rounded-[4px] border border-sand-dk p-5">
            <p class="font-ui text-[11px] uppercase tracking-[0.35em] text-ink-faded mb-1">Deposits Collected</p>
            <p class="font-display font-bold text-[clamp(28px,4vw,36px)] text-forest">{{formatCents64 .TotalDeposits}}</p>
        </div>

        <!-- Trips Booked -->
        <div class="bg-white rounded-[4px] border border-sand-dk p-5">
            <p class="font-ui text-[11px] uppercase tracking-[0.35em] text-ink-faded mb-1">Trips Booked</p>
            <p class="font-display font-bold text-[clamp(28px,4vw,36px)] text-ink">{{.BookedCount}}</p>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="mb-10">
        <h2 class="font-display font-bold text-ink text-lg mb-4">Quick Actions</h2>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
            <a href="/admin/inquiries/?status=new"
               class="flex items-center gap-3 bg-white rounded-[4px] border border-sand-dk p-4 hover:border-copper transition-colors min-h-[48px]">
                <div class="w-10 h-10 rounded-full bg-copper/10 flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-copper" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
                    </svg>
                </div>
                <div>
                    <p class="font-ui text-[12px] uppercase tracking-[0.2em] text-ink font-semibold">View New Inquiries</p>
                    <p class="font-body text-ink-faded text-xs">See who's interested</p>
                </div>
            </a>

            <a href="/admin/availability/"
               class="flex items-center gap-3 bg-white rounded-[4px] border border-sand-dk p-4 hover:border-copper transition-colors min-h-[48px]">
                <div class="w-10 h-10 rounded-full bg-forest/10 flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-forest" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                    </svg>
                </div>
                <div>
                    <p class="font-ui text-[12px] uppercase tracking-[0.2em] text-ink font-semibold">Edit Availability</p>
                    <p class="font-body text-ink-faded text-xs">Update trip dates</p>
                </div>
            </a>

            <a href="/admin/deposits/"
               class="flex items-center gap-3 bg-white rounded-[4px] border border-sand-dk p-4 hover:border-copper transition-colors min-h-[48px]">
                <div class="w-10 h-10 rounded-full bg-saddle/10 flex items-center justify-center flex-shrink-0">
                    <svg class="w-5 h-5 text-saddle" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
                <div>
                    <p class="font-ui text-[12px] uppercase tracking-[0.2em] text-ink font-semibold">Configure Deposits</p>
                    <p class="font-body text-ink-faded text-xs">Set deposit amounts</p>
                </div>
            </a>
        </div>
    </div>

    <!-- Recent Inquiries -->
    <div>
        <div class="flex items-center justify-between mb-4">
            <h2 class="font-display font-bold text-ink text-lg">Recent Inquiries</h2>
            {{if .RecentInquiries}}
            <a href="/admin/inquiries/" class="font-ui text-[11px] uppercase tracking-[0.35em] text-copper hover:text-copper-lt transition-colors">View All</a>
            {{end}}
        </div>

        {{if .RecentInquiries}}
        <div class="space-y-3">
            {{range .RecentInquiries}}
            <a href="/admin/inquiries/{{.ID}}" class="block bg-white rounded-[4px] border border-sand-dk p-4 hover:border-copper transition-colors">
                <div class="flex items-start justify-between gap-4">
                    <div class="min-w-0">
                        <p class="font-display font-semibold text-ink truncate">{{.Name}}</p>
                        <p class="font-body text-ink-faded text-sm truncate">{{if .TripName}}{{.TripName}}{{else}}General inquiry{{end}}</p>
                    </div>
                    <div class="flex items-center gap-3 flex-shrink-0">
                        <span class="inline-block px-2 py-1 rounded-[4px] font-ui text-[10px] uppercase tracking-[0.3em]
                            {{if eq .Status "new"}}bg-copper/10 text-copper
                            {{else if eq .Status "contacted"}}bg-river/10 text-river
                            {{else if eq .Status "booked"}}bg-forest/10 text-forest
                            {{else}}bg-stone/10 text-stone{{end}}">
                            {{statusLabel .Status}}
                        </span>
                        <span class="font-body text-ink-faded text-xs whitespace-nowrap">{{timeAgo .CreatedAt}}</span>
                    </div>
                </div>
            </a>
            {{end}}
        </div>
        {{else}}
        <!-- Empty State -->
        <div class="bg-white rounded-[4px] border border-sand-dk p-8 text-center">
            <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-sand-lt flex items-center justify-center">
                <svg class="w-8 h-8 text-ink-faded" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
                </svg>
            </div>
            <p class="font-display font-semibold text-ink mb-1">No inquiries yet</p>
            <p class="font-body text-ink-faded text-sm max-w-md mx-auto">
                When someone fills out the contact form on your website, their inquiry will show up here.
            </p>
        </div>
        {{end}}
    </div>

</div>
{{end}}
