{{define "trip-section"}}
<div class="trip-grid grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12 items-center">
    <!-- Image -->
    <div class="aspect-[4/3] rounded-[4px] overflow-hidden">
        {{if .Image}}
        <img src="{{.Image}}-800w.webp"
             srcset="{{.Image}}-400w.webp 400w, {{.Image}}-800w.webp 800w, {{.Image}}-1600w.webp 1600w"
             sizes="(max-width: 768px) 100vw, 50vw"
             alt="{{.Title}}" loading="lazy"
             class="w-full h-full object-cover">
        {{else}}
        <div class="w-full h-full bg-sand-dk flex items-center justify-center">
            <span class="font-ui text-stone">{{.Title}}</span>
        </div>
        {{end}}
    </div>

    <!-- Details -->
    <div>
        {{if .Tagline}}
        <p class="font-ui text-[11px] uppercase tracking-[0.35em] text-copper mb-2">{{.Tagline}}</p>
        {{end}}
        <h2 class="font-display text-2xl md:text-3xl font-bold text-ink leading-[1.1] mb-4">{{.Title}}</h2>
        <p class="font-body text-ink-mid text-[15px] leading-[1.7] mb-6">{{.Description}}</p>

        {{if .Locations}}
        <div class="mb-4">
            <h3 class="font-ui text-[11px] uppercase tracking-[0.35em] text-ink mb-2">{{if .LocationLabel}}{{.LocationLabel}}{{else}}Waters{{end}}</h3>
            <p class="font-body text-ink-faded text-sm">{{range $i, $w := .Locations}}{{if $i}}, {{end}}{{$w}}{{end}}</p>
        </div>
        {{end}}

        {{if .Season}}
        <div class="mb-4">
            <h3 class="font-ui text-[11px] uppercase tracking-[0.35em] text-ink mb-2">Season</h3>
            <p class="font-body text-ink-faded text-sm">{{.Season}}</p>
        </div>
        {{end}}

        {{if .Availability}}
        <div class="mb-4">
            <h3 class="font-ui text-[11px] uppercase tracking-[0.35em] text-ink mb-2">Availability</h3>
            <div class="flex flex-wrap gap-2">
                {{$slug := .Slug}}
                {{range .Availability}}
                {{if eq .Status "open"}}
                <a href="/contact/?trip={{$slug}}&dates={{urlquery .Dates}}" class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-semibold bg-[#1B4332]/10 text-[#1B4332] hover:bg-[#1B4332]/20 transition-colors">
                    <svg class="w-3 h-3" viewBox="0 0 16 16" fill="none"><path d="M3 8.5L6.5 12L13 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    {{.Dates}}{{if .Note}} — {{.Note}}{{end}}
                </a>
                {{else if eq .Status "limited"}}
                <a href="/contact/?trip={{$slug}}&dates={{urlquery .Dates}}" class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-semibold bg-[#B68D40]/15 text-[#92711F] hover:bg-[#B68D40]/25 transition-colors">
                    <svg class="w-3 h-3" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="8" r="5" stroke="currentColor" stroke-width="2"/></svg>
                    {{.Dates}}{{if .Note}} — {{.Note}}{{end}}
                </a>
                {{else if eq .Status "booked"}}
                <span class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-semibold bg-gray-200 text-gray-500 line-through">
                    <svg class="w-3 h-3" viewBox="0 0 16 16" fill="none"><path d="M4 4L12 12M12 4L4 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                    {{.Dates}}{{if .Note}} — {{.Note}}{{end}}
                </span>
                {{end}}
                {{end}}
            </div>
        </div>
        {{end}}

        {{if .Includes}}
        <div class="mb-4">
            <h3 class="font-ui text-[11px] uppercase tracking-[0.35em] text-ink mb-2">What's Included</h3>
            <ul class="font-body text-ink-faded text-sm space-y-1">
                {{range .Includes}}
                <li class="flex items-start gap-2">
                    <svg class="checkmark-icon mt-0.5" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 8.5L6.5 12L13 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>{{.}}</span>
                </li>
                {{end}}
            </ul>
        </div>
        {{end}}

        <div class="flex flex-wrap items-center gap-x-6 gap-y-2 mb-6">
            {{if .Duration}}<span class="font-body text-ink-faded text-sm">{{.Duration}}</span>{{end}}
            {{if .Price}}<span class="font-display font-bold text-ink">{{.Price}}</span>{{end}}
        </div>

        <a href="/contact/?trip={{.Slug}}" class="btn btn-primary w-full sm:w-auto text-center">
            Book This Trip
        </a>
    </div>
</div>
{{end}}
